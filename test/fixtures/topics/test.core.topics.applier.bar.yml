---
# Version 0
# Test invalid broker ID
apiVersion: v1
kind: topic
metadata:
  name: test.core.topics.applier.bar
spec:
  configs:
    retention.ms: "172800000"
  partitions: 3
  replicationFactor: 2
  assignments:
    - [1, 2]
    - [2, 4]
    - [3, 1]
  reassignment:
    awaitTimeoutSec: 30
---
# Version 1
# Create topic
apiVersion: v1
kind: topic
metadata:
  name: test.core.topics.applier.bar
spec:
  configs:
    retention.ms: "172800000"
  partitions: 3
  replicationFactor: 2
  assignments:
    - [1, 2]
    - [2, 3]
    - [3, 1]
  reassignment:
    awaitTimeoutSec: 30
---
# Version 2
# Increase replication factor
apiVersion: v1
kind: topic
metadata:
  name: test.core.topics.applier.bar
spec:
  configs:
    retention.ms: "172800000"
  partitions: 3
  replicationFactor: 3
  assignments:
    - [1, 2, 3]
    - [2, 3, 1]
    - [3, 1, 2]
  reassignment:
    awaitTimeoutSec: 30
---
# Version 3
# Add partitions
apiVersion: v1
kind: topic
metadata:
  name: test.core.topics.applier.bar
spec:
  configs:
    retention.ms: "172800000"
  partitions: 5
  replicationFactor: 3
  assignments:
    - [1, 2, 3]
    - [2, 3, 1]
    - [3, 1, 2]
    - [1, 2, 3]
    - [2, 3, 1]
  reassignment:
    awaitTimeoutSec: 30
---
# Version 4
# Add partitions and decrease replication factor
apiVersion: v1
kind: topic
metadata:
  name: test.core.topics.applier.bar
spec:
  configs:
    retention.ms: "172800000"
  partitions: 6
  replicationFactor: 2
  assignments:
    - [1, 2]
    - [2, 3]
    - [3, 1]
    - [1, 2]
    - [2, 3]
    - [3, 1]
  reassignment:
    awaitTimeoutSec: 30

# Test not awaiting and hitting the error on dry-run of assignments
